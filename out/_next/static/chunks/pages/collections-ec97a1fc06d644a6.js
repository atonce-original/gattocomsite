(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{3453:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/collections",function(){return n(5340)}])},6076:(e,t,n)=>{"use strict";n.d(t,{u:()=>c});var o=n(3110),l=n(4335);class r{getTimestamp(){return Math.floor(Date.now()/1e3).toString()}async generateSignature(e){let t=new TextEncoder,n=t.encode(this.secretKey),o=await crypto.subtle.importKey("raw",n,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return btoa(Array.from(new Uint8Array(await crypto.subtle.sign("HMAC",o,t.encode(e)))).map(e=>String.fromCharCode(e)).join(""))}async request(e){try{return(await this.client.request(e)).data}catch(e){throw console.error("Ошибка API запроса:",e),e}}constructor(e,t){this.addSignatureAndTimestamp=async e=>{let t=JSON.stringify(e.data||e.params||{}),n=this.getTimestamp(),l=await this.generateSignature(t);return e.headers||(e.headers=new o.$t),e.headers.set("Content-Type","application/json"),e.headers.set("X-TIMESTAMP",n),e.headers.set("X-SIGNATURE",l),e},this.secretKey=t,this.client=l.A.create({baseURL:e}),this.client.interceptors.request.use(this.addSignatureAndTimestamp)}}let c=new r("https://api.eralab.net/api","iO0HgZuPjY6OVm9UxpG9hGuhWujuiERL8t5CFvrJB0tWSN18TsWl86eNxZJkFpYMv0mm7tz2MnM6g0v8wQPYTw==")},5340:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var o=n(4848),l=n(6540),r=n(6715),c=n(270),a=n.n(c),i=n(9965),s=n.n(i),d=n(6076);let h="collectionsData",u=()=>{let e=localStorage.getItem(h);if(!e)return null;let{data:t,timestamp:n}=JSON.parse(e);return(Date.now()-n)/6e4>60?(localStorage.removeItem(h),null):t},m=e=>{let t={data:e,timestamp:Date.now()};localStorage.setItem(h,JSON.stringify(t))};async function p(){let e=u();if(e)return console.log("Данные коллекций получены из кэша."),e;try{console.log("Fetching all collections from API...");let e=await d.u.request({method:"GET",url:"/collections"});return m(e),e}catch(e){throw console.error("Error fetching collections:",e),Error("Failed to load collections.")}}let _=()=>{let[e,t]=(0,l.useState)([]),[n,c]=(0,l.useState)(!0),[i,d]=(0,l.useState)(!1),h=(0,r.useRouter)();return((0,l.useEffect)(()=>{(async()=>{try{let e=await p();t(e)}catch(e){console.error("Ошибка при загрузке коллекций:",e),d(!0)}finally{c(!1)}})()},[]),i)?(0,o.jsx)("p",{children:"Ошибка при загрузке коллекций."}):(0,o.jsxs)("div",{className:a().centeredContainer,children:[(0,o.jsx)("h1",{className:a().header,children:"Collections"}),n?(0,o.jsx)("p",{children:"Загрузка коллекций..."}):(0,o.jsx)("div",{className:a().collectionGrid,children:e.map(e=>(0,o.jsxs)("div",{className:a().collectionCard,onClick:()=>h.push("/collections/".concat(encodeURIComponent(e.collectionAddress))),children:[(0,o.jsx)(s(),{src:e.collectionImage,alt:e.collectionName,width:70,height:70}),(0,o.jsx)("div",{className:a().collectionContent,children:(0,o.jsx)("h4",{children:e.collectionName})})]},e.collectionAddress))})]})}},270:e=>{e.exports={centeredContainer:"Collection_centeredContainer__DJ9Nj",header:"Collection_header__vbbVF",collectionGrid:"Collection_collectionGrid__r5miI",collectionCard:"Collection_collectionCard__dOJov",collectionImage:"Collection_collectionImage__a64CQ",collectionContent:"Collection_collectionContent__Ov2mY"}}},e=>{var t=t=>e(e.s=t);e.O(0,[556,965,636,593,792],()=>t(3453)),_N_E=e.O()}]);